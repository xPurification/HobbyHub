{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\devon\\\\OneDrive\\\\Documents\\\\GitHub\\\\final-project-xPurification\\\\client\\\\src\\\\pages\\\\ViewPost.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { Link, withRouter, useParams } from 'react-router-dom';\nimport { supabase } from '../client';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst ViewPost = _ref => {\n  _s();\n\n  let {\n    history\n  } = _ref;\n  // Pass history as a prop\n  const {\n    id\n  } = useParams();\n  const [post, setPost] = useState(null);\n  useEffect(() => {\n    const fetchPost = async () => {\n      const {\n        data\n      } = await supabase.from('Posts').select().eq('id', id).single();\n      setPost(data);\n    };\n\n    fetchPost();\n  }, [id]);\n\n  const deletePost = async () => {\n    await supabase.from('Posts').delete().eq('id', id);\n    history.push('/'); // Redirect to home page after deletion\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"ViewPost\",\n    children: post ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Created at: \", post.created_at]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 32,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: post.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 33,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: post.content\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 34,\n        columnNumber: 11\n      }, this), post.imageURL && /*#__PURE__*/_jsxDEV(\"img\", {\n        src: post.imageURL,\n        alt: \"Post\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 29\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Upvotes: \", post.upvotes]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: `/edit/${id}`,\n        children: \"Edit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: deletePost,\n        children: \"Delete\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 29,\n    columnNumber: 5\n  }, this);\n};\n\n_s(ViewPost, \"6+b5eOm0C2EIwwbuXxVLhmPamew=\", false, function () {\n  return [useParams];\n});\n\n_c = ViewPost;\nexport default _c2 = withRouter(ViewPost); // Wrap with withRouter\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"ViewPost\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"names":["React","useState","useEffect","Link","withRouter","useParams","supabase","ViewPost","history","id","post","setPost","fetchPost","data","from","select","eq","single","deletePost","delete","push","created_at","title","content","imageURL","upvotes"],"sources":["C:/Users/devon/OneDrive/Documents/GitHub/final-project-xPurification/client/src/pages/ViewPost.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Link, withRouter, useParams } from 'react-router-dom';\r\nimport { supabase } from '../client';\r\n\r\nconst ViewPost = ({ history }) => { // Pass history as a prop\r\n  const { id } = useParams();\r\n  const [post, setPost] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const fetchPost = async () => {\r\n      const { data } = await supabase\r\n        .from('Posts')\r\n        .select()\r\n        .eq('id', id)\r\n        .single();\r\n\r\n      setPost(data);\r\n    }\r\n\r\n    fetchPost();\r\n  }, [id]);\r\n\r\n  const deletePost = async () => {\r\n    await supabase.from('Posts').delete().eq('id', id);\r\n    history.push('/'); // Redirect to home page after deletion\r\n  }\r\n\r\n  return (\r\n    <div className=\"ViewPost\">\r\n      {post ? (\r\n        <div>\r\n          <p>Created at: {post.created_at}</p>\r\n          <h1>{post.title}</h1>\r\n          <p>{post.content}</p>\r\n          {post.imageURL && <img src={post.imageURL} alt=\"Post\" />}\r\n          <p>Upvotes: {post.upvotes}</p>\r\n          <Link to={`/edit/${id}`}>Edit</Link>\r\n          <button onClick={deletePost}>Delete</button>\r\n          {/* Comment section */}\r\n        </div>\r\n      ) : (\r\n        <p>Loading...</p>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default withRouter(ViewPost); // Wrap with withRouter\r\n"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,SAASC,IAAT,EAAeC,UAAf,EAA2BC,SAA3B,QAA4C,kBAA5C;AACA,SAASC,QAAT,QAAyB,WAAzB;;;AAEA,MAAMC,QAAQ,GAAG,QAAiB;EAAA;;EAAA,IAAhB;IAAEC;EAAF,CAAgB;EAAE;EAClC,MAAM;IAAEC;EAAF,IAASJ,SAAS,EAAxB;EACA,MAAM,CAACK,IAAD,EAAOC,OAAP,IAAkBV,QAAQ,CAAC,IAAD,CAAhC;EAEAC,SAAS,CAAC,MAAM;IACd,MAAMU,SAAS,GAAG,YAAY;MAC5B,MAAM;QAAEC;MAAF,IAAW,MAAMP,QAAQ,CAC5BQ,IADoB,CACf,OADe,EAEpBC,MAFoB,GAGpBC,EAHoB,CAGjB,IAHiB,EAGXP,EAHW,EAIpBQ,MAJoB,EAAvB;MAMAN,OAAO,CAACE,IAAD,CAAP;IACD,CARD;;IAUAD,SAAS;EACV,CAZQ,EAYN,CAACH,EAAD,CAZM,CAAT;;EAcA,MAAMS,UAAU,GAAG,YAAY;IAC7B,MAAMZ,QAAQ,CAACQ,IAAT,CAAc,OAAd,EAAuBK,MAAvB,GAAgCH,EAAhC,CAAmC,IAAnC,EAAyCP,EAAzC,CAAN;IACAD,OAAO,CAACY,IAAR,CAAa,GAAb,EAF6B,CAEV;EACpB,CAHD;;EAKA,oBACE;IAAK,SAAS,EAAC,UAAf;IAAA,UACGV,IAAI,gBACH;MAAA,wBACE;QAAA,2BAAgBA,IAAI,CAACW,UAArB;MAAA;QAAA;QAAA;QAAA;MAAA,QADF,eAEE;QAAA,UAAKX,IAAI,CAACY;MAAV;QAAA;QAAA;QAAA;MAAA,QAFF,eAGE;QAAA,UAAIZ,IAAI,CAACa;MAAT;QAAA;QAAA;QAAA;MAAA,QAHF,EAIGb,IAAI,CAACc,QAAL,iBAAiB;QAAK,GAAG,EAAEd,IAAI,CAACc,QAAf;QAAyB,GAAG,EAAC;MAA7B;QAAA;QAAA;QAAA;MAAA,QAJpB,eAKE;QAAA,wBAAad,IAAI,CAACe,OAAlB;MAAA;QAAA;QAAA;QAAA;MAAA,QALF,eAME,QAAC,IAAD;QAAM,EAAE,EAAG,SAAQhB,EAAG,EAAtB;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QANF,eAOE;QAAQ,OAAO,EAAES,UAAjB;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QAPF;IAAA;MAAA;MAAA;MAAA;IAAA,QADG,gBAYH;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAbJ;IAAA;IAAA;IAAA;EAAA,QADF;AAkBD,CAzCD;;GAAMX,Q;UACWF,S;;;KADXE,Q;AA2CN,qBAAeH,UAAU,CAACG,QAAD,CAAzB,C,CAAqC"},"metadata":{},"sourceType":"module"}