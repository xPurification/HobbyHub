{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/devon/OneDrive/Documents/GitHub/HobbyHub/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/devon/OneDrive/Documents/GitHub/HobbyHub/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"C:/Users/devon/OneDrive/Documents/GitHub/HobbyHub/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/devon/OneDrive/Documents/GitHub/HobbyHub/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/devon/OneDrive/Documents/GitHub/HobbyHub/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import{supabase}from'../client';import'./CreatePost.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CreatePost=function CreatePost(){var _useState=useState({title:\"\",content:\"\",imageURL:\"\"}),_useState2=_slicedToArray(_useState,2),post=_useState2[0],setPost=_useState2[1];var handleChange=function handleChange(event){var _event$target=event.target,name=_event$target.name,value=_event$target.value;setPost(function(prev){return _objectSpread(_objectSpread({},prev),{},_defineProperty({},name,value));});};var createPost=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){var postData,_yield$supabase$from$,data,error;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();postData={title:post.title,created_at:new Date().toISOString()};if(post.content.trim()!==''){postData.content=post.content;}if(post.imageURL.trim()!==''){postData.imageURL=post.imageURL;}_context.prev=4;_context.next=7;return supabase.from('Posts').insert(postData);case 7:_yield$supabase$from$=_context.sent;data=_yield$supabase$from$.data;error=_yield$supabase$from$.error;if(error){console.error('Error creating post:',error.message);}else{console.log('Post created successfully:',data);// Optionally, you can redirect the user to the home page after successful creation\nwindow.location.href=\"/\";}_context.next=16;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](4);console.error('Error creating post:',_context.t0.message);case 16:case\"end\":return _context.stop();}}},_callee,null,[[4,13]]);}));return function createPost(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"title\",name:\"title\",placeholder:\"Title\",onChange:handleChange}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"textarea\",{rows:\"5\",cols:\"50\",id:\"content\",name:\"content\",placeholder:\"Content (Optional)\",onChange:handleChange}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"imageURL\",name:\"imageURL\",placeholder:\"Image URL (Optional)\",onChange:handleChange}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Create Post\",onClick:createPost})]})});};export default CreatePost;","map":{"version":3,"names":["React","useState","supabase","CreatePost","title","content","imageURL","post","setPost","handleChange","event","target","name","value","prev","createPost","preventDefault","postData","created_at","Date","toISOString","trim","from","insert","data","error","console","message","log","window","location","href"],"sources":["C:/Users/devon/OneDrive/Documents/GitHub/HobbyHub/client/src/pages/CreatePost.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { supabase } from '../client'\nimport './CreatePost.css'\n\nconst CreatePost = () => {\n\n    const [post, setPost] = useState({ title: \"\", content: \"\", imageURL: \"\" })\n\n    const handleChange = (event) => {\n        const { name, value } = event.target;\n        setPost((prev) => {\n            return {\n                ...prev,\n                [name]: value,\n            }\n        })\n    }\n\n    const createPost = async (event) => {\n        event.preventDefault();\n    \n        const postData = { title: post.title, created_at: new Date().toISOString() };\n    \n        if (post.content.trim() !== '') {\n            postData.content = post.content;\n        }\n    \n        if (post.imageURL.trim() !== '') {\n            postData.imageURL = post.imageURL;\n        }\n    \n        try {\n            const { data, error } = await supabase.from('Posts').insert(postData);\n    \n            if (error) {\n                console.error('Error creating post:', error.message);\n            } else {\n                console.log('Post created successfully:', data);\n                // Optionally, you can redirect the user to the home page after successful creation\n                window.location.href = \"/\";\n            }\n        } catch (error) {\n            console.error('Error creating post:', error.message);\n        }\n    };\n    \n    \n\n    return (\n        <div>\n            <form>\n                <input type=\"text\" id=\"title\" name=\"title\" placeholder=\"Title\" onChange={handleChange} /><br />\n                <br />\n\n                <textarea rows=\"5\" cols=\"50\" id=\"content\" name=\"content\" placeholder=\"Content (Optional)\" onChange={handleChange}>\n                </textarea>\n                <br />\n\n                <input type=\"text\" id=\"imageURL\" name=\"imageURL\" placeholder=\"Image URL (Optional)\" onChange={handleChange} /><br />\n                <br />\n\n                <input type=\"submit\" value=\"Create Post\" onClick={createPost} />\n            </form>\n        </div>\n    )\n}\n\nexport default CreatePost"],"mappings":"utBAAA,MAAOA,MAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,QAAT,KAAyB,WAAzB,CACA,MAAO,kBAAP,C,wFAEA,GAAMC,WAAU,CAAG,QAAbA,WAAa,EAAM,CAErB,cAAwBF,QAAQ,CAAC,CAAEG,KAAK,CAAE,EAAT,CAAaC,OAAO,CAAE,EAAtB,CAA0BC,QAAQ,CAAE,EAApC,CAAD,CAAhC,wCAAOC,IAAP,eAAaC,OAAb,eAEA,GAAMC,aAAY,CAAG,QAAfA,aAAe,CAACC,KAAD,CAAW,CAC5B,kBAAwBA,KAAK,CAACC,MAA9B,CAAQC,IAAR,eAAQA,IAAR,CAAcC,KAAd,eAAcA,KAAd,CACAL,OAAO,CAAC,SAACM,IAAD,CAAU,CACd,sCACOA,IADP,wBAEKF,IAFL,CAEYC,KAFZ,GAIH,CALM,CAAP,CAMH,CARD,CAUA,GAAME,WAAU,4FAAG,iBAAOL,KAAP,kKACfA,KAAK,CAACM,cAAN,GAEMC,QAHS,CAGE,CAAEb,KAAK,CAAEG,IAAI,CAACH,KAAd,CAAqBc,UAAU,CAAE,GAAIC,KAAJ,GAAWC,WAAX,EAAjC,CAHF,CAKf,GAAIb,IAAI,CAACF,OAAL,CAAagB,IAAb,KAAwB,EAA5B,CAAgC,CAC5BJ,QAAQ,CAACZ,OAAT,CAAmBE,IAAI,CAACF,OAAxB,CACH,CAED,GAAIE,IAAI,CAACD,QAAL,CAAce,IAAd,KAAyB,EAA7B,CAAiC,CAC7BJ,QAAQ,CAACX,QAAT,CAAoBC,IAAI,CAACD,QAAzB,CACH,CAXc,sCAcmBJ,SAAQ,CAACoB,IAAT,CAAc,OAAd,EAAuBC,MAAvB,CAA8BN,QAA9B,CAdnB,4CAcHO,IAdG,uBAcHA,IAdG,CAcGC,KAdH,uBAcGA,KAdH,CAgBX,GAAIA,KAAJ,CAAW,CACPC,OAAO,CAACD,KAAR,CAAc,sBAAd,CAAsCA,KAAK,CAACE,OAA5C,EACH,CAFD,IAEO,CACHD,OAAO,CAACE,GAAR,CAAY,4BAAZ,CAA0CJ,IAA1C,EACA;AACAK,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAuB,GAAvB,CACH,CAtBU,iFAwBXL,OAAO,CAACD,KAAR,CAAc,sBAAd,CAAsC,YAAME,OAA5C,EAxBW,qEAAH,kBAAVZ,WAAU,4CAAhB,CA8BA,mBACI,kCACI,qCACI,cAAO,IAAI,CAAC,MAAZ,CAAmB,EAAE,CAAC,OAAtB,CAA8B,IAAI,CAAC,OAAnC,CAA2C,WAAW,CAAC,OAAvD,CAA+D,QAAQ,CAAEN,YAAzE,EADJ,cAC6F,aAD7F,cAEI,aAFJ,cAII,iBAAU,IAAI,CAAC,GAAf,CAAmB,IAAI,CAAC,IAAxB,CAA6B,EAAE,CAAC,SAAhC,CAA0C,IAAI,CAAC,SAA/C,CAAyD,WAAW,CAAC,oBAArE,CAA0F,QAAQ,CAAEA,YAApG,EAJJ,cAMI,aANJ,cAQI,cAAO,IAAI,CAAC,MAAZ,CAAmB,EAAE,CAAC,UAAtB,CAAiC,IAAI,CAAC,UAAtC,CAAiD,WAAW,CAAC,sBAA7D,CAAoF,QAAQ,CAAEA,YAA9F,EARJ,cAQkH,aARlH,cASI,aATJ,cAWI,cAAO,IAAI,CAAC,QAAZ,CAAqB,KAAK,CAAC,aAA3B,CAAyC,OAAO,CAAEM,UAAlD,EAXJ,GADJ,EADJ,CAiBH,CA7DD,CA+DA,cAAeZ,WAAf"},"metadata":{},"sourceType":"module"}